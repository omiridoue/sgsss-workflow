<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Building Your Own Computational Workflow for Social Scientists: Modules</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png"><link rel="manifest" href="../favicons/incubator/site.webmanifest"><link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-warning">
          <abbr title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
              Alpha
            </a>
            <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../05.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Building Your Own Computational Workflow for Social Scientists
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Building Your Own Computational Workflow for Social Scientists
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="learner_profiles.html">Learner Profiles</a></li><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Groovy syntax</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Building Your Own Computational Workflow for Social Scientists
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 77%" class="percentage">
    77%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 77%" aria-valuenow="77" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../05.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00.html">1. Introduction</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02.html">2. Hello Nextflow</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03.html">3. Parameters</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04.html">4. Channels</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Modules
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#modules">Modules</a></li>
<li><a href="#process-definition">Process definition</a></li>
<li><a href="#script">Script</a></li>
<li><a href="#inputs">Inputs</a></li>
<li><a href="#input-repeaters">Input repeaters</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06.html">6. Modules Part 2</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07.html">7. Workflow</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08.html">8. Operators</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09.html">9. Reporting</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10.html">10. Nextflow configuration</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="01.html">11. Auxiliary Tools</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="11.html">12. Resuming a Workflow</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="12.html">13. Portability of Workflow</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <li><a href="learner_profiles.html">Learner Profiles</a></li><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Groovy syntax</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/04.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/06.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/04.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Channels
        </a>
        <a class="chapter-link float-end" href="../instructor/06.html" rel="next">
          Next: Modules Part 2...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Modules</h1>
        <p>Last updated on 2025-07-05 |

        <a href="https://github.com/omiridoue/sgsss_workflow/edit/main/episodes/05.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do I run tasks/modulees in Nextflow?</li>
<li>How do I get data, files and values, into a module?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Understand how Nextflow uses modulees to implement tasks.</li>
<li>Create a Nextflow module.</li>
<li>Define inputs to a module.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="modules">Modules<a class="anchor" aria-label="anchor" href="#modules"></a></h2>
<hr class="half-width"><p>We now know how to create and use Channels to send data around a
workflow. We will now see how to run tasks within a workflow using
modulees. Modules are nextflow scripts that can include definitions
(workflows, processes, and functions).</p>
<p>A <code>module</code> is the way Nextflow implements commands you
would run on the command line or custom scripts.</p>
<p>Here we focus on how defining processes within a module. A process
can be thought of as a particular step in a workflow, e.g. data
wrangling for analysis. Modules are independent of each other (don’t
require any another module to implement) and can not communicate/write
to each other. Data is passed between modulees via input and output
Channels.</p>
<p>For example, we previously saw the process
<code>GENERATE_READS</code> can accept multiple files as inputs. In the
previous episodes we saw examples of combinations of inputs,
<code>each_period.tar.gz</code> and
<code>comopsition_each_period.tar.gz</code>. Specifically in Task 4.3 we
used the <code>channel.fromFilePairs()</code> to generate tuples of
inputs with file names, including both data and auxiliary data
files.</p>
<p>Now we will show how to convert this into a simple Nextflow
module.</p>
</section><section><h2 class="section-heading" id="process-definition">Process definition<a class="anchor" aria-label="anchor" href="#process-definition"></a></h2>
<hr class="half-width"><p>The module definition starts with keyword <code>module</code>,
followed by module name, in this case <code>GENERATE_READS</code>, and
finally the module <code>body</code> delimited by curly brackets
<code>{}</code>. The module body must contain a string which represents
the command or, more generally, a script that is implemented by it.</p>
<div id="implicit-variables" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="implicit-variables" class="callout-inner">
<h3 class="callout-title">Implicit variables</h3>
<div class="callout-content">
<p>We use the Nextflow implicit variable <code>${projectDir}</code> to
specify the directory where the main script is located. This is
important as Nextflow scripts are implemented in a separate working
directory. A full list of implicit variables can be found <a href="https://www.nextflow.io/docs/latest/script.html?highlight=implicit%20variables#implicit-variables" class="external-link">here</a>.</p>
</div>
</div>
</div>
<p>To add the module to a workflow, add a <code>workflow</code> block,
and call the module like a function. We will learn more about the
<code>workflow</code> block in the workflow episode. We can now run the
module:</p>
<p><strong>Note</strong> We need to add the Nextflow run option
<code>--module.debug</code> to print the output to the terminal.</p>
<div id="task-5.1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="task-5.1" class="callout-inner">
<h3 class="callout-title">Task 5.1</h3>
<div class="callout-content">
<p>Open the Nextflow script <code>05_modules.nf</code> navigate to the
module definition section. You notice there is now a reference to a
module <code>GENERATE_READS</code>. Where is the process defined? How
many times is the process used in the workflow?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Essentially this stores the process definition for
<code>GENERATE_READS</code>. Note previously we defined the process in
the same file as our workflow, without having to fall back on a module.
It is generally good practice to organise code into modules, and store
these in the same folder. This is really helpful whenever we re-use a
process for a different purpose. Generally we can only use a process
once, if we need to repurpose a process, we’ll need to make sure to
assign an alias to each instance we refer to this. This is where modules
come handy as we can separate each set of code.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">GROOVY<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode groovy" tabindex="0"><code class="sourceCode groovy"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">//import modules </span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>include <span class="op">{</span> GENERATE_READS <span class="kw">as</span> GENERATE_RDS<span class="op">}</span> from <span class="st">'./modules/generate_reads/'</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>include <span class="op">{</span> GENERATE_READS <span class="kw">as</span> GENERATE_DAT<span class="op">}</span> from <span class="st">'./modules/generate_reads/'</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="dt">def</span> ZipChannel_dat <span class="op">=</span> <span class="bu">Channel</span><span class="op">.</span><span class="fu">fromPath</span><span class="op">(</span>params<span class="op">.</span>composition_data<span class="op">)</span> <span class="co">// change this to composition_sub whenever data file name changes</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="dt">def</span> ZipChannel_RDS <span class="op">=</span> <span class="bu">Channel</span><span class="op">.</span><span class="fu">fromPath</span><span class="op">(</span>params<span class="op">.</span>school_data<span class="op">)</span> <span class="co">// change this multi_period_sub whenever data file name changes</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>workflow <span class="op">{</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>    </span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>    dataset <span class="op">=</span>  <span class="fu">GENERATE_DAT</span><span class="op">(</span>ZipChannel_RDS<span class="op">)</span> \</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>    <span class="op">|</span> flatten \</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>    <span class="op">|</span> map <span class="op">{</span> file <span class="op">-&gt;</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>    <span class="dt">def</span> key <span class="op">=</span> file<span class="op">.</span>name<span class="op">.</span><span class="fu">toString</span><span class="op">().</span><span class="fu">split</span><span class="op">(</span><span class="st">'</span><span class="sc">\\</span><span class="st">.'</span><span class="op">)[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>    <span class="dt">def</span> school_ID <span class="op">=</span> file<span class="op">.</span>name<span class="op">.</span><span class="fu">toString</span><span class="op">().</span><span class="fu">split</span><span class="op">(</span><span class="st">"_|</span><span class="sc">\\</span><span class="st">."</span><span class="op">)[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">tuple</span><span class="op">(</span>school_ID<span class="op">,</span> key<span class="op">,</span> file<span class="op">)}</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>    </span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>    composition <span class="op">=</span> <span class="fu">GENERATE_RDS</span><span class="op">(</span>ZipChannel_dat<span class="op">)</span> </span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>    <span class="op">|</span> flatten \</span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>    <span class="op">|</span> map <span class="op">{</span> file <span class="op">-&gt;</span> </span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>    <span class="dt">def</span> key <span class="op">=</span> file<span class="op">.</span>name<span class="op">.</span><span class="fu">toString</span><span class="op">().</span><span class="fu">split</span><span class="op">(</span><span class="st">'</span><span class="sc">\\</span><span class="st">.'</span><span class="op">)[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>    <span class="dt">def</span> school_ID <span class="op">=</span> file<span class="op">.</span>name<span class="op">.</span><span class="fu">toString</span><span class="op">().</span><span class="fu">split</span><span class="op">(</span><span class="st">"_|</span><span class="sc">\\</span><span class="st">."</span><span class="op">)[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">tuple</span><span class="op">(</span>school_ID<span class="op">,</span> key<span class="op">,</span> file<span class="op">)}</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="definition-blocks">Definition blocks<a class="anchor" aria-label="anchor" href="#definition-blocks"></a></h3>
<p>The previous example was a simple <code>module</code> with no defined
inputs and outputs that ran only once. To control inputs, outputs and
how a command is implemented a module may contain five definition
blocks:</p>
<ol style="list-style-type: decimal"><li>
<strong>directives - 0, 1, or more</strong>: allow the definition of
optional settings that affect the execution of the current module
e.g. the number of cpus a task uses and the amount of memory
allocated.</li>
<li>
<strong>inputs - 0, 1, or more</strong>: Define the input
dependencies, usually channels, which determines the number of times a
module is implemented.</li>
<li>
<strong>outputs - 0, 1, or more</strong>: Defines the output
channels used by the module to send results/data produced by the
module.</li>
<li>
<strong>when clause - optional</strong>: Allows you to define a
condition that must be verified in order to implement the module.</li>
<li>
<strong>script block - required</strong>: A statement within quotes
that defines the commands that are implemented by the module to carry
out its task.</li>
</ol><p>The syntax is defined as follows:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">GROOVY<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode groovy" tabindex="0"><code class="sourceCode groovy"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>module <span class="op">&lt;</span> NAME <span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="op">[</span> directives <span class="op">]</span>        </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  input<span class="op">:</span>                </span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="op">&lt;</span> module inputs <span class="op">&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  output<span class="op">:</span>               </span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="op">&lt;</span> module outputs <span class="op">&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  when<span class="op">:</span>                 </span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="op">&lt;</span> condition <span class="op">&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  <span class="op">[</span>script<span class="op">|</span>shell<span class="op">|</span>exec<span class="op">]:</span>  </span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>  <span class="op">&lt;</span> user script to be implemented <span class="op">&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="script">Script<a class="anchor" aria-label="anchor" href="#script"></a></h2>
<hr class="half-width"><p>At minimum a module block must contain a <code>script</code>
block.</p>
<p>The <code>script</code> block is a String “statement” that defines
the command that is implemented by the module to carry out its task.
These are normally the commands you would run on a terminal.</p>
<p>A module contains only one <code>script</code> block, and it must be
the last statement when the module contains <code>input</code> and
<code>output</code> declarations.</p>
<p>The <code>script</code> block can be a simple one line string in
quotes.</p>
<p>Or, for commands that span multiple lines you can encase the command
in triple quotes <code>"""</code>.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>The following section on python is meant to be run by the instructor
not the learners. It is meant to be a demonstration of the different
ways to run a module. This can be skipped for time.</p>
</div>
</div>
</div>
</div>
<p>By default the module command is interpreted as a
<strong>Bash</strong> script. However, any other scripting language can
be used just simply starting the script with the corresponding <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)" class="external-link">Shebang</a>
declaration.</p>
<p>This allows the use of a different programming languages which may
better fit a particular job. However, for large chunks of code it is
suggested to save them into separate files and invoke them from the
module script.</p>
<div id="associated-scripts" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="associated-scripts" class="callout-inner">
<h3 class="callout-title">Associated scripts</h3>
<div class="callout-content">
<p>Scripts such as the one in the example above,
<code>siena07RunSimOnly.R</code>, can be stored in a <code>bin</code>
folder at the same directory level as the Nextflow workflow script that
invokes them, and permission to run files. Nextflow will automatically
add this folder to the <code>PATH</code> environment variable. To invoke
the script in a Nextflow module, simply use its filename on its own
rather than invoking the interpreter
e.g. <code>siena07RunSimOnly.R</code> instead of
<code>R siena07RunSimOnly.R</code>. <strong>Note</strong> The script
<code>siena07RunSimOnly.R</code> must be executable to run.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="script-parameters">Script parameters<a class="anchor" aria-label="anchor" href="#script-parameters"></a></h3>
<p>The command in the <code>script</code> block can be defined
dynamically using Nextflow variables e.g. <code>${projectDir}</code>. To
reference a variable in the script block you can use the <code>$</code>
in front of the Nextflow variable name, and additionally you can add
<code>{}</code> around the variable name
e.g. <code>${projectDir}</code>.</p>
<div id="variable-substitutions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="variable-substitutions" class="callout-inner">
<h3 class="callout-title">Variable substitutions</h3>
<div class="callout-content">
<p>Similar to bash scripting Nextflow uses the <code>$</code> character
to introduce variable substitutions. The variable name to be expanded
may be enclosed in braces <code>{variable_name}</code>, which are
optional but serve to protect the variable to be expanded from
characters immediately following it which could be interpreted as part
of the name. It is a good rule of thumb to always use the
<code>{}</code> syntax because it enhances readability and clarity,
ensures correct variable interpretation, and prevents potential syntax
errors in complex expressions. Note the <code>$</code> symbol is
reserved for Nextflow variables, if you use this in e.g your R script
code, you will either need to escape the reserved character with
<code>\$</code> or preferably use different syntax to index a
variable.</p>
</div>
</div>
</div>
<p>We saw in section 02 most cases we do not want to hard code parameter
values. We saw in the parameter episode the use of a special Nextflow
variable <code>params</code> that can be used to assign values from the
command line. You would do this by adding a key name to the params
variable and specifying a value, like
<code>params.keyname = value</code></p>
<p><strong>Note:</strong> parameters to the workflow can be specified
through the command line with two hyphens <code>--</code>.</p>
<div id="task-5.2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="task-5.2" class="callout-inner">
<h3 class="callout-title">Task 5.2</h3>
<div class="callout-content">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">nextflow</span> run 05_modules.nf <span class="at">--module.debug</span></span></code></pre>
</div>
<p><strong>Note:</strong> The Nextflow option
<code>--module.debug</code> will print the module’s standard output to
the terminal.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
executor &gt;  local (2)
[1b/fac7c3] process &gt; GENERATE_DAT (1) [100%] 1 of 1 ✔
[cc/96a9e1] process &gt; GENERATE_RDS (1) [100%] 1 of 1 ✔
[school123, 56]
[school124, 88]
[school125, 55]
[school126, 55]
Pipeline completed!
Started at  2025-06-26T12:42:32.047860197Z
Finished at 2025-06-26T12:42:35.178956448Z
Time elapsed: 3.1s
Execution status: OK
</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="bash-variables">Bash variables<a class="anchor" aria-label="anchor" href="#bash-variables"></a></h3>
<p>Nextflow uses the same Bash syntax for variable substitutions,
<code>$variable</code>, in strings. However, Bash variables need to be
escaped using <code>\</code> character in front of
<code>\$variable</code> name.</p>
</div>
</section><section><h2 class="section-heading" id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a></h2>
<hr class="half-width"><p>Modules are isolated from each other but can communicate by sending
values and files via Nextflow channels from <code>input</code> and into
<code>output</code> blocks.</p>
<p>The <code>input</code> block defines which channels the module is
expecting to receive input from. The number of elements in input
channels determines the module dependencies and the number of times a
module is run.</p>
<figure><img src="../fig/channel-process.png" alt="Process Flow" class="figure mx-auto d-block"><div class="figcaption">Process Flow</div>
</figure><p>You can only define one input block at a time and it must contain one
or more input declarations.</p>
<p>The input block follows the syntax shown below:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">GROOVY<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode groovy" tabindex="0"><code class="sourceCode groovy"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>input<span class="op">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="op">&lt;</span>input qualifier<span class="op">&gt;</span> <span class="op">&lt;</span>input name<span class="op">&gt;</span></span></code></pre>
</div>
<p>The input qualifier declares the type of data to be received.</p>
<div id="input-qualifiers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="input-qualifiers" class="callout-inner">
<h3 class="callout-title">Input qualifiers</h3>
<div class="callout-content">
<ul><li>
<code>val</code>: Lets you access the received input value by its
name as a variable in the module script.</li>
<li>
<code>env</code>: Lets you use the input value to set an environment
variable named as the specified input name.</li>
<li>
<code>path</code>: Lets you handle the received value as a file,
staging the file properly in the execution context.</li>
<li>
<code>stdin</code>: Lets you forward the received value to the
module stdin special file.</li>
<li>
<code>tuple</code>: Lets you handle a group of input values having
one of the above qualifiers.</li>
<li>
<code>each</code>: Lets you implement the module for each entry in
the input collection. A complete list of inputs can be found <a href="https://www.nextflow.io/docs/latest/module.html#inputs" class="external-link">here</a>.</li>
</ul></div>
</div>
</div>
<div class="section level3">
<h3 id="input-values">Input values<a class="anchor" aria-label="anchor" href="#input-values"></a></h3>
<p>The <code>val</code> qualifier allows you to receive value data as
input. It can be accessed in the module script by using the specified
input name, as shown in the following example:</p>
<p>In the above example the module is implemented 1 time; each time a
value is received from the queue channel <code>composition</code> it is
used to run the module.</p>
<div id="channel-order" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="channel-order" class="callout-inner">
<h3 class="callout-title">Channel order</h3>
<div class="callout-content">
<p>The channel guarantees that items are delivered in the same order as
they have been sent, but since the module is implemented in a parallel
manner, there is no guarantee on the order.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="input-files">Input files<a class="anchor" aria-label="anchor" href="#input-files"></a></h3>
<p>When you need to handle files as input, you need the
<code>path</code> qualifier. Using the <code>path</code> qualifier means
that Nextflow will stage it in the module directory, and it can be
accessed in the script by using the name specified in the input
declaration.</p>
<p>The input file name can be defined dynamically by defining the input
name as a Nextflow variable and referenced in the script using the
<code>$variable_name</code> syntax.</p>
<p>For example, in the script below, we assign the variable name
<code>read</code> to the input files using the <code>path</code>
qualifier.</p>
<p>In this way we can use a <code>shell</code> block definition instead
of <code>script</code>, for a trivial process such as extracting files
from a folder. When using the <code>shell</code> statement Bash
variables are referenced in the normal way
<code>$my_bash_variable</code>. However, the <code>shell</code>
statement uses a different syntax for Nextflow variable substitutions:
<code>!{nextflow_variable}</code>, which is needed to use both Nextflow
and Bash variables in the same script.</p>
<p>In the <code>GENERATE_READS</code> module definition file we set a
bash variable <code>$targz</code>. The variable was used to reference
the input file path. Previously, in episode 3, we also printed the file
path using <code>printf '${targz}\\t'</code> in our script block.</p>
<p>Recall the example in the script <code>03_params.nf</code>
demonstrated use of a Bash variable, <code>${targz}</code>.</p>
<div id="callout6" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>The input name can also be defined as a user-specified filename
inside quotes. For example, in the script below, the name of the file is
specified as <code>'each_period.tar.gz'</code> in the input definition
and can be referenced by that name in the script block.</p>
</div>
</div>
</div>
<div id="file-objects-as-inputs" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="file-objects-as-inputs" class="callout-inner">
<h3 class="callout-title">File Objects as inputs</h3>
<div class="callout-content">
<p>When a module declares an input file, the corresponding channel
elements must be file objects, i.e. created with the path helper
function from the file specific channel factories,
e.g. <code>Channel.fromPath</code> or
<code>Channel.fromFilePairs</code>. We saw examples for this in a
previous <a href="https://omiridoue.github.io/sgsss-workflow/03.html" class="external-link">episode</a>.</p>
</div>
</div>
</div>
<div id="task-5.3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="task-5.3" class="callout-inner">
<h3 class="callout-title">Task 5.3</h3>
<div class="callout-content">
<p>For the script <code>05_modules.nf</code>:</p>
<ol style="list-style-type: decimal"><li>Identify the names of the Channels using <code>fromPath</code> for
the <code>params.school_data</code> and
<code>params.composition_data</code>. By definition are these queue or
value channels?</li>
<li>Explain the role of the map closure <code>{}</code>, how many
outputs do the channels <code>composition</code> and
<code>dataset</code> <em>return</em> ?</li>
</ol></div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>The names for the two queue channels are <code>ZipChannel_dat</code>
and <code>ZipChannel_RDS</code> and are defined with the following
code:</li>
</ol><div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">GROOVY<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode groovy" tabindex="0"><code class="sourceCode groovy"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">//05_modules.nf</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="dt">def</span> ZipChannel_dat <span class="op">=</span> <span class="bu">Channel</span><span class="op">.</span><span class="fu">fromPath</span><span class="op">(</span>params<span class="op">.</span>composition_data<span class="op">)</span> </span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="dt">def</span> ZipChannel_RDS <span class="op">=</span> <span class="bu">Channel</span><span class="op">.</span><span class="fu">fromPath</span><span class="op">(</span>params<span class="op">.</span>school_data<span class="op">)</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>The map closure is a type of function operating on the output of a
Channel. Just like a function you return select values using the return
statement at the end of the function. In this case we return a tuple
with three self-explanatory items, the first two involve values and the
third is a file path, <code>tuple(school_ID, key, file)</code>. A close
alternative is the <code>Channel.fromFilePairs()</code> which is a good
option for combining two separate data types.</li>
</ol><div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">GROOVY<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode groovy" tabindex="0"><code class="sourceCode groovy"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co">//05_modules.nf</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    composition <span class="op">=</span> <span class="fu">GENERATE_RDS</span><span class="op">(</span>ZipChannel_dat<span class="op">)</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="op">|</span> flatten \</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    <span class="op">|</span> map <span class="op">{</span> file <span class="op">-&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="dt">def</span> key <span class="op">=</span> file<span class="op">.</span>name<span class="op">.</span><span class="fu">toString</span><span class="op">().</span><span class="fu">split</span><span class="op">(</span><span class="st">'</span><span class="sc">\\</span><span class="st">.'</span><span class="op">)[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>    <span class="dt">def</span> school_ID <span class="op">=</span> file<span class="op">.</span>name<span class="op">.</span><span class="fu">toString</span><span class="op">().</span><span class="fu">split</span><span class="op">(</span><span class="st">"_|</span><span class="sc">\\</span><span class="st">."</span><span class="op">)[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">tuple</span><span class="op">(</span>school_ID<span class="op">,</span> key<span class="op">,</span> file<span class="op">)}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="combining-input-channels">Combining input channels<a class="anchor" aria-label="anchor" href="#combining-input-channels"></a></h3>
<p>A key feature of modulees is the ability to handle inputs from
multiple channels. However, it’s important to understand how the number
of items within the multiple channels affect the execution of a
module.</p>
<div id="task-5.4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="task-5.4" class="callout-inner">
<h3 class="callout-title">Task 5.4</h3>
<div class="callout-content">
<p>How is the output from either channel wrangled in the queue channel?
Could you think of an alternative channel definition that could
replicate the combination of a pair of channels?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>The channel operator <strong>combine</strong> is used to combine the
main process output <code>dataset</code> and the process output
<code>composition</code>. We combine, or merge the two based on the
second item in the tuple, i.e <code>key</code>. It is important to note
that the counter for indexing tuples or lists in Nextflow starts from 0
rather than 1.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">GROOVY<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode groovy" tabindex="0"><code class="sourceCode groovy"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">//05_modules.nf</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>workflow <span class="op">{</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>   <span class="op">.</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>   <span class="op">.</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>   <span class="op">.</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    estimation_channel <span class="op">=</span> composition \</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>        <span class="op">|</span> <span class="fu">combine</span><span class="op">(</span>dataset<span class="op">,</span> by<span class="op">:</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>   <span class="op">.</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>   <span class="op">.</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>   <span class="op">.</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>What is happening is that the module waits until it receives an input
value from all the queue channels declared as input.</p>
<p>When this condition is verified, it uses up the input values coming
from the respective queue channels, runs the task. This logic repeats
until one or more queue channels have no more content. The module then
stops.</p>
<p>What happens when not all channels have the same number of
elements?</p>
<p>In the above example the module is implemented only two times,
because when a queue channel has no more data, it stops the module
execution.</p>
</div>
<div class="section level3">
<h3 id="value-channels-and-module-termination">Value channels and module termination<a class="anchor" aria-label="anchor" href="#value-channels-and-module-termination"></a></h3>
<p><strong>Note</strong> however that value channels,
<code>Channel.value</code>, do not affect the module termination.</p>
<p>To better understand this behaviour, compare the previous example
with the following one:</p>
<div id="task-5.5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="task-5.5" class="callout-inner">
<h3 class="callout-title">Task 5.5</h3>
<div class="callout-content">
<p>Open the nextflow script <code>05_modules.nf</code> that combines two
input channels.</p>
<p>Identify the map_join closure and inspect the output of this returns
whenever it operates on the combined output of the dataset and auxiliary
data channels.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">GROOVY<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode groovy" tabindex="0"><code class="sourceCode groovy"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">// 05_modules.nf</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="op">.</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="op">.</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="op">.</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="dt">def</span> <span class="fu">map_join</span><span class="op">(</span>channel_a<span class="op">,</span> key<span class="op">,</span> value<span class="op">){</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    channel_a</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>        <span class="op">.</span><span class="fu">map</span><span class="op">{</span> it <span class="op">-&gt;</span> <span class="op">[</span>it<span class="op">[</span><span class="st">'key'</span><span class="op">],</span> it<span class="op">[</span><span class="st">'value'</span><span class="op">]]</span> <span class="op">}</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="op">.</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="op">.</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="op">.</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="fu">workflow</span> <span class="op">{</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>    estimation_channel<span class="op">.</span><span class="fu">view</span><span class="op">()</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>    mapped_params <span class="op">=</span> <span class="fu">map_join</span><span class="op">(</span>pipe_school_info<span class="op">,</span> <span class="st">'key'</span><span class="op">,</span> <span class="st">'value'</span><span class="op">)</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>    mapped_params<span class="op">.</span><span class="fu">view</span><span class="op">()</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="input-repeaters">Input repeaters<a class="anchor" aria-label="anchor" href="#input-repeaters"></a></h2>
<hr class="half-width"><p>We saw previously that by default the number of times a module runs
is defined by the queue channel with the fewest items. However, the
<code>each</code> qualifier allows you to repeat a module for each item
in a list or a queue channel, every time new data is received. The
material here simply motivates there is a sufficient number of options
to wrangle the inputs and outputs of a process to suit objectives.
Explore more information in the <a href="https://nextflow.io/docs/latest/process.html" class="external-link">Nextflow
documentation</a>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>A Nextflow module is an independent step in a workflow.</li>
<li>Modules contain up to five definition blocks including: directives,
inputs, outputs, when clause and finally a script block.</li>
<li>The script block contains the commands you would like to run.</li>
<li>A module should have a script but the other four blocks are
optional.</li>
<li>Inputs are defined in the input block with a type qualifier and a
name.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/04.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/06.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/04.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Channels
        </a>
        <a class="chapter-link float-end" href="../instructor/06.html" rel="next">
          Next: Modules Part 2...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/omiridoue/sgsss_workflow/edit/main/episodes/05.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/omiridoue/sgsss_workflow/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/omiridoue/sgsss_workflow/" class="external-link">Source</a></p>
				<p><a href="https://github.com/omiridoue/sgsss_workflow/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:e.omiridou.1@research.gla.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/omiridoue/varnish/tree/main" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://omiridoue.github.io/sgsss_workflow/instructor/05.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "workflow, reproducible, computation social science",
  "name": "Modules",
  "creativeWorkStatus": "active",
  "url": "https://omiridoue.github.io/sgsss_workflow/instructor/05.html",
  "identifier": "https://omiridoue.github.io/sgsss_workflow/instructor/05.html",
  "dateCreated": "2025-04-03",
  "dateModified": "2025-07-05",
  "datePublished": "2025-11-18"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

